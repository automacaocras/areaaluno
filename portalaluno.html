<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Portal do Aluno – Editora Crás</title>
  <link rel="stylesheet" href="style.css?v=7">

  <style>
    .topbar{
      width:100vw;margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw);
      background:#e6b200;color:#000;font-weight:800;text-align:center;
      padding:12px 0;box-shadow:inset 0 -2px 0 rgba(0,0,0,.08);
    }
    .curso-logo{width:200px;max-width:60vw;height:auto;display:block;margin:10px auto 6px}
    .dias-restantes{font-weight:800;margin:8px 0 6px;text-align:center}
    .dias-danger{color:#d93025}
    .card,.box-feedback{
      max-width:900px;margin:14px auto;background:#fff;border:1px solid #f2e3a6;
      border-radius:18px;padding:18px;box-shadow:0 8px 24px rgba(0,0,0,.06);text-align:center;
    }
    label{display:block;text-align:left;font-weight:700;margin-top:8px;margin-bottom:3px}
    select,textarea,input[type="file"]{
      width:100%;max-width:100%;box-sizing:border-box;
    }
    .btn-cta{
      display:block;width:100%;max-width:900px;margin:16px auto 10px;padding:16px 18px;
      border:none;border-radius:18px;background:#e6b200;color:#111;font-weight:800;cursor:pointer;
    }
    .flex-row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
    .btn-sec{background:#ddd;color:#111;border:none;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn-exit{display:inline-block;margin:8px auto 24px;padding:10px 18px;background:#e53935;color:#fff;border:none;border-radius:12px;font-weight:800;cursor:pointer}
    .btn-back{background:#ddd;color:#111;border:none;border-radius:12px;padding:10px 18px;font-weight:800;cursor:pointer}
    .hidden{display:none!important}
    #overlay{display:none;position:fixed;inset:0;width:100svw;height:100svh;background:rgba(0,0,0,.35);z-index:10000;place-items:center;}
    #overlay .loader{padding:12px 16px;background:#fff;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.15);}
    #overlay .loader-text{font-weight:700;color:#000;}
    #filesWrap input[type="file"]{display:block;margin:6px auto;}
  </style>
</head>
<body>
  <div class="topbar">[aluno]</div>

  <main class="page-center" style="--center-offset:-40px;">
    <section id="envio" class="">
      <div class="card">
        <h2>Envio de exercício para feedback</h2>
        <div class="hint">*No máximo 3 artes por semana.</div>

        <label>Módulo:</label>
        <select id="selModulo" disabled><option>Carregando...</option></select>

        <label>Aula:</label>
        <select id="selAula" disabled><option>Selecione o módulo primeiro</option></select>

        <label>Envie a arte:</label>
        <div id="filesWrap" class="row">
          <input type="file" class="fileItem" accept="image/*">
          <div class="thumb-hint">Formatos JPG/PNG. Até 3 envios.</div>
        </div>

        <div class="flex-row">
          <button id="btnAddImagem" class="btn-sec" type="button">Adicionar imagem</button>
          <button id="btnResetar" class="btn-sec" type="button">Cancelar imagens</button>
        </div>

        <label>Descrição</label>
        <textarea id="descricao" rows="5" placeholder="Conte sobre suas dificuldades."></textarea>

        <button id="btnEnviar" class="btn-cta" type="button">Enviar</button>
      </div>

      <div class="envio-back" style="text-align:center;margin-top:10px;">
        <button id="btnVoltarEnvio" class="btn-back" type="button">Voltar</button>
      </div>
    </section>
  </main>

  <div id="overlay"><div class="loader"><div class="loader-text">Enviando…</div></div></div>

  <footer class="site-footer">
    <div class="footer-inner">
      <strong>Editora Crás • </strong>
      <a href="mailto:contato@editoracras.com">Suporte</a>
      <small>© 2025. Todos os direitos reservados.</small>
    </div>
  </footer>

  <script>
    const MAX_FILES = 3;
    const qs = s => document.querySelector(s);
    const qsa = s => Array.from(document.querySelectorAll(s));

    function addFileInput(){
      const wrap = qs("#filesWrap");
      const count = qsa("#filesWrap input[type='file']").length;
      if (count >= MAX_FILES) return;
      const inp = document.createElement("input");
      inp.type = "file";
      inp.accept = "image/*";
      inp.className = "fileItem";
      wrap.insertBefore(inp, wrap.lastElementChild);
      updateAddBtnVisibility();
    }

    function resetFiles(){
      qs("#filesWrap").innerHTML =
        '<input type="file" class="fileItem" accept="image/*"><div class="thumb-hint">Formatos JPG/PNG. Até 3 envios.</div>';
      updateAddBtnVisibility();
    }

    function updateAddBtnVisibility(){
      const count = qsa("#filesWrap input[type='file']").length;
      qs("#btnAddImagem").style.display = count >= MAX_FILES ? "none" : "inline-block";
    }

    document.addEventListener("DOMContentLoaded", () => {
      qs("#btnAddImagem").onclick = addFileInput;
      qs("#btnResetar").onclick = resetFiles;
      qs("#btnVoltarEnvio").onclick = () => alert("Voltar ao dashboard (aqui voltaria para tela principal)");
      updateAddBtnVisibility();
    });
  </script>
</body>
</html>
